<html>
    <head>
        <link rel="import" href="libraries.html">
        <link rel="import" href="pmc-component.html">
    </head>
    <body>
        <template id="tswitch">
            <!--Export in inkscape with viewBox and with optimised svg!-->
            <?xml version="1.0" encoding="UTF-8" standalone="no"?>
            <!-- Created with Inkscape (http://www.inkscape.org/) -->
            <svg xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 383 43" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/"">
             <metadata id="metadata7">
              <rdf:RDF>
               <cc:Work rdf:about="">
                <dc:format>image/svg+xml</dc:format>
                <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>
                <dc:title/>
               </cc:Work>
              </rdf:RDF>
             </metadata>
             <g id="layer1" stroke-linejoin="miter" stroke-dashoffset="0" transform="translate(-108.5,-40.875)" stroke="#000" stroke-linecap="butt" stroke-miterlimit="4" stroke-dasharray="none">
              <rect id="rect2987" style="enable-background:accumulate;color:#000000;" rx="30" ry="0" height="40" width="380" y="42.362" x="110" stroke-width="3" fill="#c8c8c8"/>
              <rect id="rect3759" style="enable-background:accumulate;color:#000000;" rx="0" height="20" width="20" y="52.362" x="120" stroke-width="1.3333" fill="#F00"/>
              <rect id="rect3759-1" style="enable-background:accumulate;color:#000000;" rx="0" height="10" width="10" y="52.362" x="150" stroke-width="0.66667" fill="#FF0"/>
              <rect id="rect3797" style="enable-background:accumulate;color:#000000;" height="20" width="30" y="52.362" x="170" stroke-width="3" fill="#666"/>
              <rect id="rect3759-1-7" style="enable-background:accumulate;color:#000000;" rx="0" height="10" width="10" y="52.362" x="170" stroke-width="0.66667" fill="#0F0"/>
              <rect id="rect3759-1-7-4" style="enable-background:accumulate;color:#000000;" rx="0" height="10" width="10" y="52.362" x="190" stroke-width="0.66667" fill="#0F0"/>
              <rect id="rect3797-0" style="enable-background:accumulate;color:#000000;" height="20" width="30" y="52.362" x="210" stroke-width="3" fill="#666"/>
              <rect id="rect3759-1-7-9" style="enable-background:accumulate;color:#000000;" rx="0" height="10" width="10" y="52.362" x="210" stroke-width="0.66667" fill="#0F0"/>
              <rect id="rect3759-1-7-4-4" style="enable-background:accumulate;color:#000000;" rx="0" height="10" width="10" y="52.362" x="230" stroke-width="0.66667" fill="#0F0"/>
              <rect id="rect3797-8" style="enable-background:accumulate;color:#000000;" height="20" width="30" y="52.362" x="250" stroke-width="3" fill="#666"/>
              <rect id="rect3759-1-7-8" style="enable-background:accumulate;color:#000000;" rx="0" height="10" width="10" y="52.362" x="250" stroke-width="0.66667" fill="#0F0"/>
              <rect id="rect3759-1-7-4-2" style="enable-background:accumulate;color:#000000;" rx="0" height="10" width="10" y="52.362" x="270" stroke-width="0.66667" fill="#0F0"/>
              <rect id="rect3797-0-4" style="enable-background:accumulate;color:#000000;" height="20" width="30" y="52.362" x="290" stroke-width="3" fill="#666"/>
              <rect id="rect3759-1-7-9-5" style="enable-background:accumulate;color:#000000;" rx="0" height="10" width="10" y="52.362" x="290" stroke-width="0.66667" fill="#0F0"/>
              <rect id="rect3759-1-7-4-4-5" style="enable-background:accumulate;color:#000000;" rx="0" height="10" width="10" y="52.362" x="310" stroke-width="0.66667" fill="#0F0"/>
              <rect id="rect3797-8-1" style="enable-background:accumulate;color:#000000;" height="20" width="30" y="52.362" x="330" stroke-width="3" fill="#666"/>
              <rect id="rect3759-1-7-8-7" style="enable-background:accumulate;color:#000000;" rx="0" height="10" width="10" y="52.362" x="330" stroke-width="0.66667" fill="#0F0"/>
              <rect id="rect3759-1-7-4-2-1" style="enable-background:accumulate;color:#000000;" rx="0" height="10" width="10" y="52.362" x="350" stroke-width="0.66667" fill="#0F0"/>
              <rect id="rect3797-0-4-1" style="enable-background:accumulate;color:#000000;" height="20" width="30" y="52.362" x="370" stroke-width="3" fill="#666"/>
              <rect id="rect3759-1-7-9-5-5" style="enable-background:accumulate;color:#000000;" rx="0" height="10" width="10" y="52.362" x="370" stroke-width="0.66667" fill="#0F0"/>
              <rect id="rect3759-1-7-4-4-5-2" style="enable-background:accumulate;color:#000000;" rx="0" height="10" width="10" y="52.362" x="390" stroke-width="0.66667" fill="#0F0"/>
              <rect id="rect3797-8-1-7" style="enable-background:accumulate;color:#000000;" height="20" width="30" y="52.362" x="410" stroke-width="3" fill="#666"/>
              <rect id="rect3759-1-7-8-7-6" style="enable-background:accumulate;color:#000000;" rx="0" height="10" width="10" y="52.362" x="410" stroke-width="0.66667" fill="#0F0"/>
              <rect id="rect3759-1-7-4-2-1-1" style="enable-background:accumulate;color:#000000;" rx="0" height="10" width="10" y="52.362" x="430" stroke-width="0.66667" fill="#0F0"/>
              <rect id="rect3797-0-4-1-4" style="enable-background:accumulate;color:#000000;" height="20" width="30" y="52.362" x="450" stroke-width="3" fill="#666"/>
              <rect id="rect3759-1-7-9-5-5-2" style="enable-background:accumulate;color:#000000;" rx="0" height="10" width="10" y="52.362" x="450" stroke-width="0.66667" fill="#0F0"/>
              <rect id="rect3759-1-7-4-4-5-2-3" style="enable-background:accumulate;color:#000000;" rx="0" height="10" width="10" y="52.362" x="470" stroke-width="0.66667" fill="#0F0"/>
             </g>
            </svg>
        </template>
        <script>
            function PMCSwitch() {
                HTMLElement.call(this);
                PMCComponent.call(this);
            }
            
            (function () {
                var importDoc = document.currentScript.ownerDocument; // importee

                var PMCSwitchProto = Object.create(HTMLElement.prototype);
                PMCSwitchProto.constructor = PMCSwitch;
            
                extendMixin(PMCSwitchProto, PMCComponent.prototype);

                // Use Shadow DOM and a template.
                PMCSwitchProto.createdCallback = function() {
                    // Get template 
                    var template = importDoc.querySelector("#tswitch");

                    // import template into
                    var clone = document.importNode(template.content, true);
                    var root = this.createShadowRoot();
 
                    root.appendChild(clone);
                    allPMCComponents[this.id] = this;

                    var svg = this.shadowRoot.querySelector("svg");
                    svg.setAttribute("width", inchesToPixels(19));
                    svg.setAttribute("height", cubicleUnitsToPixels(1));
                    var cuLocation = parseInt(this.getAttribute("data-location-cubicle"));
                    svg.setAttribute("y", cubicleUnitsToPixels(cuLocation));
                    this.attachLibraryHandler();
                };

                PMCSwitchProto.attachedCallback = function() {
                    var svg = this.shadowRoot.querySelector("svg");
                    svg.addEventListener("click", function(e) {
                        this.selectLibrary();
                        return false;
                    }.bind(this), false);
    
                };

                Object.defineProperty(PMCSwitchProto, "data-location-cubicle", {
                    value: "0",
                    writable: true
                });

                document.registerElement("pmc-switch", {
                    prototype: PMCSwitchProto
                });
            })();
        </script>

    </body>
</html>
