<!-- Selector button -->
<link rel="import" href="libraries.html">
<link rel="import" href="pmc-component.html">
<link rel="import" href="pmc-selector.html">
<link rel="import" href="pmc-array-editor.html">
<link rel="import" href="pmc-filter-editor.html">
<script type="text/javascript">
    //Constructor
    function PMCLibrary() {
        HTMLButtonElement.call(this);
        PMCComponent.call(this);
    }

    //Notice that PMCLibraryProto is an alias to PMCLibrary.prototype
    PMCLibraryProto = Object.create(HTMLButtonElement.prototype);
    PMCLibraryProto.constructor = PMCLibrary;

    extendMixin(PMCLibraryProto, PMCComponent.prototype);

    PMCLibraryProto.change = function(newLibraryName) {
        this.innerHTML = newLibraryName;
        this.value = newLibraryName;
        this.checkValues();
    }

    PMCLibraryProto.setValidations = function(validationsToSet) {
        var librarySelector = this.getLibrarySelector();
        librarySelector.editor.setValidations(validationsToSet); 
    }

    PMCLibraryProto.createdCallback = function () {
        this.addEventListener("click", function (e) {
            this.selectLibrary();
            return false;
        }.bind(this), false);

        allPMCComponents[this.id] = this;
        this.attachLibraryHandler();
    }

    document.registerElement("pmc-library", {
        prototype: PMCLibraryProto,
        extends: "button"
    });
</script>

